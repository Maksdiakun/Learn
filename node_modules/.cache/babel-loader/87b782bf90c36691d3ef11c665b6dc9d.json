{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/Learn/src/pages/SearchPage/index.js\";\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport SearchItem from \"../../components/SearchItem\";\nimport { scrollSearch } from \"../../store/search/search.actions\";\nimport Loader from \"../../components/UiComponents/Loader\";\nimport \"./index.scss\";\n\nconst SearchPage = () => {\n  const dispatch = useDispatch();\n  const {\n    searchReducer: {\n      searchResults\n    },\n    general: {\n      mainRef,\n      load\n    }\n  } = useSelector(state => state);\n\n  const updateScroll = () => {\n    dispatch(scrollSearch());\n  };\n\n  const debounced = useDebouncedCallback(updateScroll, 300);\n\n  const eventHandler = event => {\n    const fullHeight = event.target.scrollHeight;\n    const height = event.target.clientHeight;\n    const top = event.target.scrollTop;\n    const scrollToEnd = top + height;\n\n    if (scrollToEnd === fullHeight) {\n      debounced.callback();\n    }\n  };\n\n  useEffect(() => {\n    if (mainRef) {\n      mainRef.addEventListener(\"scroll\", eventHandler);\n      return () => mainRef.removeEventListener(\"wheel\", eventHandler);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [mainRef]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search_page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"page_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"Search\"), load ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }) : searchResults && searchResults.map((el, i) => /*#__PURE__*/React.createElement(SearchItem, {\n    item: el,\n    key: `el.id.videoId${i}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default SearchPage;","map":{"version":3,"sources":["/Users/mac/Desktop/Learn/src/pages/SearchPage/index.js"],"names":["React","useEffect","useDispatch","useSelector","useDebouncedCallback","SearchItem","scrollSearch","Loader","SearchPage","dispatch","searchReducer","searchResults","general","mainRef","load","state","updateScroll","debounced","eventHandler","event","fullHeight","target","scrollHeight","height","clientHeight","top","scrollTop","scrollToEnd","callback","addEventListener","removeEventListener","map","el","i"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,oBAAT,QAAqC,cAArC;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,OAAOC,MAAP,MAAmB,sCAAnB;AACA,OAAO,cAAP;;AAEA,MAAMC,UAAU,GAAG,MAAM;AACvB,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAM;AACJQ,IAAAA,aAAa,EAAE;AAAEC,MAAAA;AAAF,KADX;AAEJC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,OAAF;AAAWC,MAAAA;AAAX;AAFL,MAGFX,WAAW,CAAEY,KAAD,IAAWA,KAAZ,CAHf;;AAKA,QAAMC,YAAY,GAAG,MAAM;AACzBP,IAAAA,QAAQ,CAACH,YAAY,EAAb,CAAR;AACD,GAFD;;AAIA,QAAMW,SAAS,GAAGb,oBAAoB,CAACY,YAAD,EAAe,GAAf,CAAtC;;AACA,QAAME,YAAY,GAAIC,KAAD,IAAW;AAC9B,UAAMC,UAAU,GAAGD,KAAK,CAACE,MAAN,CAAaC,YAAhC;AACA,UAAMC,MAAM,GAAGJ,KAAK,CAACE,MAAN,CAAaG,YAA5B;AACA,UAAMC,GAAG,GAAGN,KAAK,CAACE,MAAN,CAAaK,SAAzB;AACA,UAAMC,WAAW,GAAGF,GAAG,GAAGF,MAA1B;;AACA,QAAII,WAAW,KAAKP,UAApB,EAAgC;AAC9BH,MAAAA,SAAS,CAACW,QAAV;AACD;AACF,GARD;;AAUA3B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIY,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACgB,gBAAR,CAAyB,QAAzB,EAAmCX,YAAnC;AAEA,aAAO,MAAML,OAAO,CAACiB,mBAAR,CAA4B,OAA5B,EAAqCZ,YAArC,CAAb;AACD,KALa,CAMd;;AACD,GAPQ,EAON,CAACL,OAAD,CAPM,CAAT;AASA,sBACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEGC,IAAI,gBACH,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAGHH,aAAa,IACbA,aAAa,CAACoB,GAAd,CAAkB,CAACC,EAAD,EAAKC,CAAL,kBAChB,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAED,EAAlB;AAAsB,IAAA,GAAG,EAAG,gBAAeC,CAAE,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANJ,CADF;AAaD,CA5CD;;AA8CA,eAAezB,UAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport SearchItem from \"../../components/SearchItem\";\nimport { scrollSearch } from \"../../store/search/search.actions\";\nimport Loader from \"../../components/UiComponents/Loader\";\nimport \"./index.scss\";\n\nconst SearchPage = () => {\n  const dispatch = useDispatch();\n  const {\n    searchReducer: { searchResults },\n    general: { mainRef, load },\n  } = useSelector((state) => state);\n\n  const updateScroll = () => {\n    dispatch(scrollSearch());\n  };\n\n  const debounced = useDebouncedCallback(updateScroll, 300);\n  const eventHandler = (event) => {\n    const fullHeight = event.target.scrollHeight;\n    const height = event.target.clientHeight;\n    const top = event.target.scrollTop;\n    const scrollToEnd = top + height;\n    if (scrollToEnd === fullHeight) {\n      debounced.callback();\n    }\n  };\n\n  useEffect(() => {\n    if (mainRef) {\n      mainRef.addEventListener(\"scroll\", eventHandler);\n\n      return () => mainRef.removeEventListener(\"wheel\", eventHandler);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mainRef]);\n\n  return (\n    <div className=\"search_page\">\n      <h1 className=\"page_title\">Search</h1>\n      {load ? (\n        <Loader />\n      ) : (\n        searchResults &&\n        searchResults.map((el, i) => (\n          <SearchItem item={el} key={`el.id.videoId${i}`} />\n        ))\n      )}\n    </div>\n  );\n};\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}