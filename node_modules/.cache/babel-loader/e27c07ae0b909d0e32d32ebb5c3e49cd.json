{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/Learn/src/pages/HomePage/index.js\";\nimport React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { v4 as uid } from \"uuid\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { getCategories, getSuggestedVideos, suggestedOnPagination } from \"../../store/home/home.actions\";\nimport { fetchSearch } from \"../../store/search/search.actions\";\nimport CategoryItem from \"../../components/UiComponents/CategoryItem\";\nimport SmVideoItem from \"../../components/SmVideoItem\";\nimport \"./index.scss\";\n\nconst HomePage = () => {\n  var _suggestedVideos$data;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    home: {\n      categories,\n      suggestedVideos\n    },\n    general: {\n      mainRef\n    }\n  } = useSelector(state => state);\n\n  const updateScroll = () => {\n    dispatch(suggestedOnPagination(suggestedVideos.nextPage));\n  };\n\n  const debounced = useDebouncedCallback(updateScroll, 300);\n\n  const eventHandler = event => {\n    const fullHeight = event.target.scrollHeight;\n    const height = event.target.clientHeight;\n    const top = event.target.scrollTop;\n    const scrollToEnd = top + height;\n\n    if (scrollToEnd === fullHeight) {\n      debounced.callback();\n    }\n  };\n\n  useEffect(() => {\n    dispatch(getCategories());\n    dispatch(getSuggestedVideos());\n  }, [dispatch]);\n  useEffect(() => {\n    if (mainRef) {\n      mainRef.addEventListener(\"scroll\", eventHandler);\n      return () => mainRef.removeEventListener(\"wheel\", eventHandler);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [mainRef]);\n\n  const handleClick = ({\n    target\n  }) => {\n    console.log(target.value);\n    dispatch(fetchSearch(target.value, history));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"page_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"Home\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"width_125 category_list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, categories && categories.map(e => /*#__PURE__*/React.createElement(CategoryItem, {\n    key: e.id,\n    value: e.snippet.title,\n    label: e.snippet.title,\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video_row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, (_suggestedVideos$data = suggestedVideos.data) === null || _suggestedVideos$data === void 0 ? void 0 : _suggestedVideos$data.map(e => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col_4\",\n    key: uid(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SmVideoItem, {\n    imgUrl: e.snippet.thumbnails.high.url,\n    title: e.snippet.title,\n    videoId: e.id.videoId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/mac/Desktop/Learn/src/pages/HomePage/index.js"],"names":["React","useEffect","useHistory","useSelector","useDispatch","v4","uid","useDebouncedCallback","getCategories","getSuggestedVideos","suggestedOnPagination","fetchSearch","CategoryItem","SmVideoItem","HomePage","dispatch","history","home","categories","suggestedVideos","general","mainRef","state","updateScroll","nextPage","debounced","eventHandler","event","fullHeight","target","scrollHeight","height","clientHeight","top","scrollTop","scrollToEnd","callback","addEventListener","removeEventListener","handleClick","console","log","value","map","e","id","snippet","title","data","thumbnails","high","url","videoId"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { v4 as uid } from \"uuid\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport {\n  getCategories,\n  getSuggestedVideos,\n  suggestedOnPagination,\n} from \"../../store/home/home.actions\";\nimport { fetchSearch } from \"../../store/search/search.actions\";\nimport CategoryItem from \"../../components/UiComponents/CategoryItem\";\nimport SmVideoItem from \"../../components/SmVideoItem\";\nimport \"./index.scss\";\n\nconst HomePage = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    home: { categories, suggestedVideos },\n    general: { mainRef },\n  } = useSelector((state) => state);\n\n  const updateScroll = () => {\n    dispatch(suggestedOnPagination(suggestedVideos.nextPage));\n  };\n\n  const debounced = useDebouncedCallback(updateScroll, 300);\n  const eventHandler = (event) => {\n    const fullHeight = event.target.scrollHeight;\n    const height = event.target.clientHeight;\n    const top = event.target.scrollTop;\n    const scrollToEnd = top + height;\n    if (scrollToEnd === fullHeight) {\n      debounced.callback();\n    }\n  };\n\n  useEffect(() => {\n    dispatch(getCategories());\n    dispatch(getSuggestedVideos());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (mainRef) {\n      mainRef.addEventListener(\"scroll\", eventHandler);\n\n      return () => mainRef.removeEventListener(\"wheel\", eventHandler);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mainRef]);\n\n  const handleClick = ({ target }) => {\n    console.log(target.value);\n    dispatch(fetchSearch(target.value, history));\n  };\n\n  return (\n    <div>\n      <h1 className=\"page_title\">Home</h1>\n      <div className=\"width_125 category_list\">\n        {categories &&\n          categories.map((e) => (\n            <CategoryItem\n              key={e.id}\n              value={e.snippet.title}\n              label={e.snippet.title}\n              onClick={handleClick}\n            />\n          ))}\n      </div>\n      <div>\n        <div className=\"video_row\">\n          {suggestedVideos.data?.map((e) => (\n            <div className=\"col_4\" key={uid()}>\n              <SmVideoItem\n                imgUrl={e.snippet.thumbnails.high.url}\n                title={e.snippet.title}\n                videoId={e.id.videoId}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}