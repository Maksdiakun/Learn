{"ast":null,"code":"import { call, put, select } from \"redux-saga/effects\";\nimport constants from \"../constans\";\nimport API from \"../../API\";\nexport function* fetchSearch(action) {\n  try {\n    const response = yield call(API.search, action.payload);\n    yield put({\n      type: constants.SEARCH_SUCCESS,\n      payload: {\n        data: response.data,\n        query: action.payload\n      }\n    });\n  } catch (error) {\n    yield put({\n      type: constants.MESSAGE,\n      payload: error\n    });\n  }\n}\nexport function* scrollSearch() {\n  try {\n    const {\n      searchReducer: {\n        nextPage,\n        searchResults,\n        query\n      }\n    } = yield select();\n    const newarr = [...searchResults];\n    const {\n      data\n    } = yield call(API.searchPagination, query, nextPage);\n    yield put({\n      type: constants.SCROLL_SUCCESS,\n      payload: {\n        items: [...newarr, ...data.items],\n        nextPageToken: data.nextPageToken\n      }\n    });\n  } catch (error) {\n    yield put({\n      type: constants.MESSAGE,\n      payload: error\n    });\n  }\n}","map":{"version":3,"sources":["/Users/mac/Desktop/Learn/src/store/search/search.sagas.js"],"names":["call","put","select","constants","API","fetchSearch","action","response","search","payload","type","SEARCH_SUCCESS","data","query","error","MESSAGE","scrollSearch","searchReducer","nextPage","searchResults","newarr","searchPagination","SCROLL_SUCCESS","items","nextPageToken"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,MAApB,QAAkC,oBAAlC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AAEA,OAAO,UAAUC,WAAV,CAAsBC,MAAtB,EAA8B;AACnC,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMP,IAAI,CAACI,GAAG,CAACI,MAAL,EAAaF,MAAM,CAACG,OAApB,CAA3B;AACA,UAAMR,GAAG,CAAC;AACRS,MAAAA,IAAI,EAAEP,SAAS,CAACQ,cADR;AAERF,MAAAA,OAAO,EAAE;AACPG,QAAAA,IAAI,EAAEL,QAAQ,CAACK,IADR;AAEPC,QAAAA,KAAK,EAAEP,MAAM,CAACG;AAFP;AAFD,KAAD,CAAT;AAOD,GATD,CASE,OAAOK,KAAP,EAAc;AACd,UAAMb,GAAG,CAAC;AACRS,MAAAA,IAAI,EAAEP,SAAS,CAACY,OADR;AAERN,MAAAA,OAAO,EAAEK;AAFD,KAAD,CAAT;AAID;AACF;AAED,OAAO,UAAUE,YAAV,GAAyB;AAC9B,MAAI;AACF,UAAM;AACJC,MAAAA,aAAa,EAAE;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,aAAZ;AAA2BN,QAAAA;AAA3B;AADX,QAEF,MAAMX,MAAM,EAFhB;AAGA,UAAMkB,MAAM,GAAG,CAAC,GAAGD,aAAJ,CAAf;AACA,UAAM;AAAEP,MAAAA;AAAF,QAAW,MAAMZ,IAAI,CAACI,GAAG,CAACiB,gBAAL,EAAuBR,KAAvB,EAA8BK,QAA9B,CAA3B;AAEA,UAAMjB,GAAG,CAAC;AACRS,MAAAA,IAAI,EAAEP,SAAS,CAACmB,cADR;AAERb,MAAAA,OAAO,EAAE;AACPc,QAAAA,KAAK,EAAE,CAAC,GAAGH,MAAJ,EAAY,GAAGR,IAAI,CAACW,KAApB,CADA;AAEPC,QAAAA,aAAa,EAAEZ,IAAI,CAACY;AAFb;AAFD,KAAD,CAAT;AAOD,GAdD,CAcE,OAAOV,KAAP,EAAc;AACd,UAAMb,GAAG,CAAC;AACRS,MAAAA,IAAI,EAAEP,SAAS,CAACY,OADR;AAERN,MAAAA,OAAO,EAAEK;AAFD,KAAD,CAAT;AAID;AACF","sourcesContent":["import { call, put, select } from \"redux-saga/effects\";\nimport constants from \"../constans\";\nimport API from \"../../API\";\n\nexport function* fetchSearch(action) {\n  try {\n    const response = yield call(API.search, action.payload);\n    yield put({\n      type: constants.SEARCH_SUCCESS,\n      payload: {\n        data: response.data,\n        query: action.payload,\n      },\n    });\n  } catch (error) {\n    yield put({\n      type: constants.MESSAGE,\n      payload: error,\n    });\n  }\n}\n\nexport function* scrollSearch() {\n  try {\n    const {\n      searchReducer: { nextPage, searchResults, query },\n    } = yield select();\n    const newarr = [...searchResults];\n    const { data } = yield call(API.searchPagination, query, nextPage);\n\n    yield put({\n      type: constants.SCROLL_SUCCESS,\n      payload: {\n        items: [...newarr, ...data.items],\n        nextPageToken: data.nextPageToken,\n      },\n    });\n  } catch (error) {\n    yield put({\n      type: constants.MESSAGE,\n      payload: error,\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}